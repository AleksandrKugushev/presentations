Здравствуйте, меня зовук Кугушев Александр и я занимаю должность Senior Software Engineer в Epam.

Недавно мы с командой обсуждали различные источники программиской мудрости.

РАССКАЗАТЬ ЧТО ТАКОЕ КОАНЫ

Послушник недавно прибыл из Храма Трёх Камней, где используется только язык C. Он был новичком в Java и вскоре наткнулся на неизменяемость строк. “Я хочу только поменять содержимое этого поля!” - воскликнул он. “Но для этого требуется создать объект StringBuffer и, впоследствии, новый объект String, дважды копируя множество нетронутых символов между ними! С какой целью были разработаны такие строки?” Учёная сестра услышала его и посоветовала: “Медную монету, передаваемую из рук в руки, всё ещё можно обменять на другой день, но только не яйцо”. И послушник просветился.

Существует много материалов по этой теме, тем не менее очень многие считают, что иммутабельность это много кода, низкая производительность и вообще не нужно. Обычно материалы перечисляют в конце, но я бы хотел сделать это в начале.

С прошлым разобрались, идем в будущее: о чем мы сегодня поговорим.

ПОКАЗАТЬ ПЛАН
КОНКРЕТИЗИРОВАТЬ ТИП ИММУТАБЕЛЬНОСТИ

Зачем? Что бы сделать жизнь проще.

...

Вскоре послушник стал определять все классы неизменяемыми. Ни одно свойство нельзя было менять: только при создании нового экземпляра можно было делать необходимые изменения. Его конструкторы иногда были удивительно большими и сложными.Учитель Java узнал об этом и сказал: “Пусть яйцо отольют из меди подадут монахине на завтрак.”Таким образом была наказана монахиня за свой совет послушнику.

Если один способ не работает для всего, это не значит что нет других способов.

DEMO:
Show Car. 
Two entity states. 
Maybe you have a question why List<IOwner>?
Show Car Factory. 
Explain different states.
Show ICarService. "All members should work only with immutable state of an entity"
...
Go to controller
Show POST test
Не заменять List - ReadOnlyList
...
Show DbCotext
...
Go to controller
Show repository
...
Go to Repository


Каждый монах должен позвать учителя Кайму как минимум раз за время пребывания в храме. Когда учитель откроет дверь, монах должен поклониться и спросить: “Какой большой плюс у сервисов без состояния?” Кайму наверняка ответит: “Десять тысяч гостей кормятся одним зерном риса”. Затем монах должен спросить: “А какой большой минус?” Кайму ответит: “Большой минус у чего?”

